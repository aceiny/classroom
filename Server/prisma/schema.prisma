generator client {
  provider  = "prisma-client-py"
  interface = "asyncio"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    String       @id @default(cuid())
  name                  String
  email                 String       @unique
  password              String
  gender                Gender
  role                  UserRole
  classroomsAsProfessor Classroom[]  @relation("ProfessorClassrooms")
  enrollments           Enrollment[]
  submissions           Submission[]
  courseworks           Coursework[] @relation("CourseworkProfessor") 
}

enum Gender {
  Male
  Female
}

enum UserRole {
  Student
  Professeur
}

model Classroom {
  id          String       @id @default(cuid())
  name        String
  professorId String
  professor   User         @relation("ProfessorClassrooms", fields: [professorId], references: [id])
  enrollments Enrollment[]
  coursework  Coursework[]
}

model Enrollment {
  id          String    @id @default(cuid())
  studentId   String
  student     User      @relation(fields: [studentId], references: [id])
  classroomId String
  classroom   Classroom @relation(fields: [classroomId], references: [id])
}

model Coursework {
  id          String       @id @default(cuid())
  classroomId String
  professorId String
  title       String
  Assignment  Boolean
  description String
  due_date    String
  classroom   Classroom    @relation(fields: [classroomId], references: [id])
  professor   User         @relation("CourseworkProfessor", fields: [professorId], references: [id]) // Updated line
  submissions Submission[]
}

model Submission {
  id           String     @id @default(cuid())
  courseworkId String
  studentId    String
  content      String
  files       File[]
  coursework   Coursework @relation(fields: [courseworkId], references: [id])
  student      User       @relation(fields: [studentId], references: [id])
}
model FileÂ {
  id String @id @default(cuid())
  name String
  path String
  type String 
  size String 
  submissionId String
  submission Submission @relation(fields: [submissionId], references: [id])
}